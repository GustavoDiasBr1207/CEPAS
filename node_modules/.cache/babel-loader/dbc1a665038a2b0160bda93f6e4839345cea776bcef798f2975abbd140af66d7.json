{"ast":null,"code":"import _objectSpread from\"/home/gustavodias/Downloads/CEPAS/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback,useEffect,useMemo,useState}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../hooks/useAuth';import'./Entrevistas.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const formatarData=isoString=>{if(!isoString){return'N√£o registrada';}const data=new Date(isoString);if(Number.isNaN(data.getTime())){return'N√£o registrada';}return data.toLocaleDateString('pt-BR');};const formatarRelativo=dias=>{if(dias===null||dias===undefined){return'Nunca realizada';}if(dias<=0){return'Hoje';}if(dias===1){return'H√° 1 dia';}return\"H\\xE1 \".concat(dias,\" dias\");};const formatarProxima=dias=>{if(dias===null||dias===undefined){return'N√£o definido';}if(dias<0){const atraso=Math.abs(dias);if(atraso===0){return'Vence hoje';}if(atraso===1){return'Atrasado 1 dia';}return\"Atrasado \".concat(atraso,\" dias\");}if(dias===0){return'Para hoje';}if(dias===1){return'Em 1 dia';}return\"Em \".concat(dias,\" dias\");};const numeroFormatado=valor=>new Intl.NumberFormat('pt-BR').format(Number(valor||0));const ordenarResumo=(lista,criterio)=>{const copia=[...lista];if(criterio==='alfabetica'){return copia.sort((a,b)=>a.nome_familia.localeCompare(b.nome_familia,'pt-BR'));}if(criterio==='entrevista-recente'){return copia.sort((a,b)=>{const dataA=a.ultima_entrevista?new Date(a.ultima_entrevista).getTime():0;const dataB=b.ultima_entrevista?new Date(b.ultima_entrevista).getTime():0;return dataB-dataA;});}if(criterio==='proxima-visita'){return copia.sort((a,b)=>{var _a$dias_ate_proxima,_b$dias_ate_proxima;const diasA=(_a$dias_ate_proxima=a.dias_ate_proxima)!==null&&_a$dias_ate_proxima!==void 0?_a$dias_ate_proxima:Number.MAX_SAFE_INTEGER;const diasB=(_b$dias_ate_proxima=b.dias_ate_proxima)!==null&&_b$dias_ate_proxima!==void 0?_b$dias_ate_proxima:Number.MAX_SAFE_INTEGER;return diasA-diasB;});}const prioridade={critical:1,warning:2,pending:3,ok:4};return copia.sort((a,b)=>{var _prioridade$a$status_,_prioridade$b$status_,_a$dias_desde_ultima,_b$dias_desde_ultima;const priA=(_prioridade$a$status_=prioridade[a.status_level])!==null&&_prioridade$a$status_!==void 0?_prioridade$a$status_:5;const priB=(_prioridade$b$status_=prioridade[b.status_level])!==null&&_prioridade$b$status_!==void 0?_prioridade$b$status_:5;if(priA!==priB){return priA-priB;}const diasA=(_a$dias_desde_ultima=a.dias_desde_ultima)!==null&&_a$dias_desde_ultima!==void 0?_a$dias_desde_ultima:Number.MAX_SAFE_INTEGER;const diasB=(_b$dias_desde_ultima=b.dias_desde_ultima)!==null&&_b$dias_desde_ultima!==void 0?_b$dias_desde_ultima:Number.MAX_SAFE_INTEGER;return diasB-diasA;});};const prepararMonitor=monitor=>{var _ref,_monitor$ID_MONITOR,_ref2,_monitor$NOME,_ref3,_monitor$TELEFONE;if(!monitor){return null;}const id=(_ref=(_monitor$ID_MONITOR=monitor.ID_MONITOR)!==null&&_monitor$ID_MONITOR!==void 0?_monitor$ID_MONITOR:monitor.id_monitor)!==null&&_ref!==void 0?_ref:monitor.id;const nome=(_ref2=(_monitor$NOME=monitor.NOME)!==null&&_monitor$NOME!==void 0?_monitor$NOME:monitor.nome)!==null&&_ref2!==void 0?_ref2:'Sem nome';const telefone=(_ref3=(_monitor$TELEFONE=monitor.TELEFONE)!==null&&_monitor$TELEFONE!==void 0?_monitor$TELEFONE:monitor.telefone)!==null&&_ref3!==void 0?_ref3:null;return{id,nome,telefone};};const Entrevistas=()=>{const{makeAuthenticatedRequest,hasPermission}=useAuth();const navigate=useNavigate();const[resumo,setResumo]=useState([]);const[metrics,setMetrics]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[pageWarnings,setPageWarnings]=useState([]);const[filtroStatus,setFiltroStatus]=useState('all');const[filtroBusca,setFiltroBusca]=useState('');const[ordenacao,setOrdenacao]=useState('prioridade');const[monitores,setMonitores]=useState([]);const[selectedFamily,setSelectedFamily]=useState(null);const[historico,setHistorico]=useState([]);const[historyLoading,setHistoryLoading]=useState(false);const[historyError,setHistoryError]=useState('');const[mostrarHistorico,setMostrarHistorico]=useState(false);const[mostrarFormulario,setMostrarFormulario]=useState(false);const[formData,setFormData]=useState({data:'',hora:'',entrevistado:'',telefone_contato:'',monitor_id:'',observacoes:'',proxima_visita:''});const[formLoading,setFormLoading]=useState(false);const[formError,setFormError]=useState('');const[formSuccess,setFormSuccess]=useState('');const[formWarnings,setFormWarnings]=useState([]);const podeRegistrar=hasPermission(['monitor','coordenador','admin']);const carregarResumo=useCallback(async()=>{setLoading(true);setError('');setPageWarnings([]);let lista=[];try{const resposta=await makeAuthenticatedRequest('/entrevistas/resumo');lista=Array.isArray(resposta)?resposta:(resposta===null||resposta===void 0?void 0:resposta.data)||[];setResumo(lista);setMetrics((resposta===null||resposta===void 0?void 0:resposta.metrics)||null);}catch(err){console.error('Erro ao carregar resumo de entrevistas:',err);setError(err.message||'Erro ao carregar resumo de entrevistas.');}finally{setLoading(false);}return lista;},[makeAuthenticatedRequest]);const carregarMonitores=useCallback(async()=>{try{const resposta=await makeAuthenticatedRequest('/dados/Monitor');let lista=[];if(Array.isArray(resposta)){lista=resposta.map(prepararMonitor).filter(Boolean);}else if(Array.isArray(resposta===null||resposta===void 0?void 0:resposta.data)){lista=resposta.data.map(prepararMonitor).filter(Boolean);}else if(resposta){const monitorNormalizado=prepararMonitor(resposta);if(monitorNormalizado){lista=[monitorNormalizado];}}setMonitores(lista);}catch(err){console.warn('N√£o foi poss√≠vel carregar a lista de monitores:',err);}},[makeAuthenticatedRequest]);const carregarHistorico=useCallback(async familiaId=>{setHistoryLoading(true);setHistoryError('');try{const resposta=await makeAuthenticatedRequest(\"/familias/\".concat(familiaId,\"/entrevistas\"));const lista=Array.isArray(resposta)?resposta:(resposta===null||resposta===void 0?void 0:resposta.data)||[];setHistorico(lista);}catch(err){console.error('Erro ao carregar hist√≥rico de entrevistas:',err);setHistorico([]);setHistoryError(err.message||'Erro ao carregar hist√≥rico de entrevistas.');}finally{setHistoryLoading(false);}},[makeAuthenticatedRequest]);useEffect(()=>{carregarResumo();carregarMonitores();},[carregarResumo,carregarMonitores]);const abrirHistorico=familia=>{setSelectedFamily(familia);setMostrarHistorico(true);carregarHistorico(familia.id_familia);};const fecharHistorico=()=>{setMostrarHistorico(false);setHistorico([]);setHistoryError('');};const abrirFormulario=familia=>{const hojeIso=new Date().toISOString().split('T')[0];setSelectedFamily(familia);setMostrarFormulario(true);setFormError('');setFormSuccess('');setFormWarnings([]);setFormData({data:hojeIso,hora:'',entrevistado:familia.ultima_entrevistado||familia.responsavel||'',telefone_contato:familia.ultima_telefone||'',monitor_id:'',observacoes:'',proxima_visita:familia.proxima_visita?familia.proxima_visita.split('T')[0]:''});};const fecharFormulario=()=>{setMostrarFormulario(false);setFormLoading(false);setFormError('');setFormSuccess('');setFormWarnings([]);};const handleFormChange=(campo,valor)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[campo]:valor}));};const registrarEntrevista=async event=>{event.preventDefault();if(!selectedFamily){setFormError('Selecione uma fam√≠lia para registrar a entrevista.');return;}if(!formData.data){setFormError('Informe a data da entrevista.');return;}const dataIso=formData.hora?\"\".concat(formData.data,\"T\").concat(formData.hora):formData.data;const payload={data_entrevista:dataIso,entrevistado:formData.entrevistado||null,telefone_contato:formData.telefone_contato||null,observacoes:formData.observacoes||null};if(formData.proxima_visita){payload.proxima_visita=formData.proxima_visita;}if(formData.monitor_id){const monitorId=Number(formData.monitor_id);if(!Number.isNaN(monitorId)){payload.monitor_id=monitorId;}}setFormLoading(true);setFormError('');setFormSuccess('');setFormWarnings([]);setPageWarnings([]);try{const resposta=await makeAuthenticatedRequest(\"/familias/\".concat(selectedFamily.id_familia,\"/entrevistas\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});setFormSuccess((resposta===null||resposta===void 0?void 0:resposta.message)||'Entrevista registrada com sucesso.');if(Array.isArray(resposta===null||resposta===void 0?void 0:resposta.warnings)){setFormWarnings(resposta.warnings);setPageWarnings(resposta.warnings);}const listaAtualizada=await carregarResumo();if(selectedFamily){const atualizada=listaAtualizada.find(item=>item.id_familia===selectedFamily.id_familia);if(atualizada){setSelectedFamily(atualizada);}}if(mostrarHistorico&&selectedFamily){await carregarHistorico(selectedFamily.id_familia);}}catch(err){console.error('Erro ao registrar entrevista:',err);setFormError(err.message||'Erro ao registrar a entrevista.');}finally{setFormLoading(false);}};const resumoFiltrado=useMemo(()=>{const textoBusca=filtroBusca.trim().toLowerCase();const filtraStatus=item=>{if(filtroStatus==='all'){return true;}if(filtroStatus==='pendente'){return item.status_prioridade==='PENDENTE';}if(filtroStatus==='critica'){return item.status_prioridade==='CRITICA';}if(filtroStatus==='alerta'){return item.status_prioridade==='ALERTA'||item.status_prioridade==='ATENCAO';}if(filtroStatus==='emdia'){return item.status_prioridade==='EM_DIA';}if(filtroStatus==='prox30'){return item.dias_ate_proxima!==null&&item.dias_ate_proxima>=0&&item.dias_ate_proxima<=30;}if(filtroStatus==='semHistorico'){return(item.total_entrevistas||0)===0;}return true;};return ordenarResumo(resumo.filter(item=>{const correspondeStatus=filtraStatus(item);if(!correspondeStatus){return false;}if(!textoBusca){return true;}const campos=[item.nome_familia,item.responsavel,item.ultima_entrevistado,item.ultima_monitor_nome].filter(Boolean).map(valor=>valor.toLowerCase());return campos.some(valor=>valor.includes(textoBusca));}),ordenacao);},[filtroBusca,filtroStatus,ordenacao,resumo]);return/*#__PURE__*/_jsxs(\"div\",{className:\"entrevistas-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"entrevistas-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDCD1 Painel de Entrevistas\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Acompanhe o hist\\xF3rico, identifique pend\\xEAncias e registre novas entrevistas das fam\\xEDlias.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"header-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-outline\",onClick:carregarResumo,disabled:loading,children:loading?'Atualizando...':'üîÑ Atualizar'})})]}),metrics&&/*#__PURE__*/_jsxs(\"div\",{className:\"metricas-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metrica-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"metrica-label\",children:\"Fam\\xEDlias acompanhadas\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"metrica-valor\",children:numeroFormatado(metrics.totalFamilias)}),/*#__PURE__*/_jsxs(\"span\",{className:\"metrica-detalhe\",children:[numeroFormatado(metrics.familiasSemEntrevista),\" sem entrevista\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metrica-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"metrica-label\",children:\"Entrevistas registradas\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"metrica-valor\",children:numeroFormatado(metrics.entrevistasTotal)}),/*#__PURE__*/_jsxs(\"span\",{className:\"metrica-detalhe\",children:[numeroFormatado(metrics.entrevistasUltimos30Dias),\" nos \\xFAltimos 30 dias\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metrica-card alerta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"metrica-label\",children:\"Pend\\xEAncias cr\\xEDticas\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"metrica-valor\",children:numeroFormatado(metrics.pendenciasCriticas)}),/*#__PURE__*/_jsxs(\"span\",{className:\"metrica-detalhe\",children:[numeroFormatado(metrics.pendenciasAlerta),\" em alerta\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metrica-card\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"metrica-label\",children:\"Pr\\xF3ximas visitas agendadas\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"metrica-valor\",children:numeroFormatado(resumoFiltrado.filter(item=>item.dias_ate_proxima!==null&&item.dias_ate_proxima>=0&&item.dias_ate_proxima<=30).length)}),/*#__PURE__*/_jsx(\"span\",{className:\"metrica-detalhe\",children:\"Agendadas para at\\xE9 30 dias\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"entrevistas-filtros\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Pesquisar por fam\\xEDlia, respons\\xE1vel ou entrevistador...\",value:filtroBusca,onChange:event=>setFiltroBusca(event.target.value)}),/*#__PURE__*/_jsxs(\"select\",{value:filtroStatus,onChange:event=>setFiltroStatus(event.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"Todos os status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pendente\",children:\"Sem entrevista\"}),/*#__PURE__*/_jsx(\"option\",{value:\"critica\",children:\"Cr\\xEDtica (>= 12 meses)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"alerta\",children:\"Alerta / Aten\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"option\",{value:\"emdia\",children:\"Em dia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"prox30\",children:\"Pr\\xF3ximas 4 semanas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"semHistorico\",children:\"Nunca entrevistadas\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:ordenacao,onChange:event=>setOrdenacao(event.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"prioridade\",children:\"Ordenar por prioridade\"}),/*#__PURE__*/_jsx(\"option\",{value:\"alfabetica\",children:\"Ordem alfab\\xE9tica\"}),/*#__PURE__*/_jsx(\"option\",{value:\"entrevista-recente\",children:\"\\xDAltimas entrevistas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"proxima-visita\",children:\"Pr\\xF3ximas visitas\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alerta alerta-erro\",children:error}),pageWarnings.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"alerta alerta-aviso\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Aten\\xE7\\xE3o:\"}),/*#__PURE__*/_jsx(\"ul\",{children:pageWarnings.map((warn,index)=>/*#__PURE__*/_jsx(\"li\",{children:warn.message},\"\".concat(warn.type,\"-\").concat(index)))})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"lista-vazia\",children:\"Carregando entrevistas...\"}),!loading&&resumoFiltrado.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"lista-vazia\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"N\\xE3o encontramos entrevistas para os filtros selecionados.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Ajuste a busca ou altere o status para visualizar os registros.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"entrevistas-grid\",children:resumoFiltrado.map(familia=>/*#__PURE__*/_jsxs(\"div\",{className:\"entrevista-card status-\".concat(familia.status_level),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:familia.nome_familia}),/*#__PURE__*/_jsxs(\"span\",{className:\"responsavel\",children:[\"Respons\\xE1vel: \",familia.responsavel||'N√£o informado']})]}),/*#__PURE__*/_jsx(\"span\",{className:\"status-tag status-\".concat(familia.status_level),children:familia.status_label})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-info\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"\\xDAltima entrevista\"}),/*#__PURE__*/_jsx(\"strong\",{children:formatarData(familia.ultima_entrevista)}),/*#__PURE__*/_jsx(\"span\",{className:\"info-sub\",children:formatarRelativo(familia.dias_desde_ultima)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Pr\\xF3xima visita agendada\"}),/*#__PURE__*/_jsx(\"strong\",{children:familia.proxima_visita?formatarData(familia.proxima_visita):'N√£o agendada'}),familia.proxima_visita&&/*#__PURE__*/_jsx(\"span\",{className:\"info-sub\",children:formatarProxima(familia.dias_ate_proxima)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Entrevistador\"}),/*#__PURE__*/_jsx(\"strong\",{children:familia.ultima_monitor_nome||'‚Äî'}),/*#__PURE__*/_jsxs(\"span\",{className:\"info-sub\",children:[familia.total_entrevistas||0,\" entrevista(s)\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:()=>abrirHistorico(familia),children:\"\\uD83D\\uDCDC Hist\\xF3rico\"}),podeRegistrar&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:()=>abrirFormulario(familia),children:\"\\u2795 Registrar entrevista\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-link\",onClick:()=>navigate(\"/editar-familia/\".concat(familia.id_familia)),children:\"\\u270F\\uFE0F Ver cadastro completo\"})]})]},familia.id_familia))}),mostrarHistorico&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",role:\"dialog\",\"aria-modal\":\"true\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal modal-large\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Hist\\xF3rico de Entrevistas\"}),/*#__PURE__*/_jsx(\"p\",{children:selectedFamily===null||selectedFamily===void 0?void 0:selectedFamily.nome_familia})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-close\",onClick:fecharHistorico,children:\"\\u2716\"})]}),historyLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Carregando hist\\xF3rico...\"}),historyError&&/*#__PURE__*/_jsx(\"div\",{className:\"alerta alerta-erro\",children:historyError}),!historyLoading&&historico.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"lista-vazia\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Nenhuma entrevista registrada.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Voc\\xEA pode registrar uma nova entrevista pelo bot\\xE3o abaixo.\"})]}),!historyLoading&&historico.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"historico-lista\",children:historico.map(item=>{var _item$monitores;return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"historico-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:formatarData(item.data_entrevista)}),/*#__PURE__*/_jsx(\"span\",{children:formatarRelativo(item.dias_desde)})]}),/*#__PURE__*/_jsx(\"span\",{className:\"historico-entrevistador\",children:(_item$monitores=item.monitores)!==null&&_item$monitores!==void 0&&_item$monitores.length?item.monitores.map(monitor=>monitor.nome).join(', '):'Monitor n√£o informado'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"historico-body\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Entrevistado:\"}),\" \",item.entrevistado||'N√£o informado']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Contato:\"}),\" \",item.telefone_contato||'N√£o informado']}),item.proxima_visita&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Pr\\xF3xima visita agendada:\"}),\" \",formatarData(item.proxima_visita),item.dias_ate_proxima!==null&&item.dias_ate_proxima!==undefined&&/*#__PURE__*/_jsxs(\"span\",{className:\"historico-proxima\",children:[\" (\",formatarProxima(item.dias_ate_proxima),\")\"]})]}),item.observacoes&&/*#__PURE__*/_jsxs(\"p\",{className:\"historico-observacoes\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Observa\\xE7\\xF5es:\"}),\" \",item.observacoes]}),item.usuario_responsavel&&/*#__PURE__*/_jsxs(\"p\",{className:\"historico-responsavel\",children:[\"Registrado por \",item.usuario_responsavel]})]})]},item.id_entrevista);})}),podeRegistrar&&/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:()=>abrirFormulario(selectedFamily),children:\"\\u2795 Registrar nova entrevista\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:fecharHistorico,children:\"Fechar\"})]})]})}),mostrarFormulario&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",role:\"dialog\",\"aria-modal\":\"true\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal modal-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Registrar entrevista\"}),/*#__PURE__*/_jsx(\"p\",{children:selectedFamily===null||selectedFamily===void 0?void 0:selectedFamily.nome_familia})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-close\",onClick:fecharFormulario,children:\"\\u2716\"})]}),formError&&/*#__PURE__*/_jsx(\"div\",{className:\"alerta alerta-erro\",children:formError}),formSuccess&&/*#__PURE__*/_jsx(\"div\",{className:\"alerta alerta-sucesso\",children:formSuccess}),formWarnings.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"alerta alerta-aviso\",children:/*#__PURE__*/_jsx(\"ul\",{children:formWarnings.map((warn,index)=>/*#__PURE__*/_jsx(\"li\",{children:warn.message},\"\".concat(warn.type,\"-\").concat(index)))})}),/*#__PURE__*/_jsxs(\"form\",{className:\"entrevista-form\",onSubmit:registrarEntrevista,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"data-entrevista\",children:\"Data\"}),/*#__PURE__*/_jsx(\"input\",{id:\"data-entrevista\",type:\"date\",value:formData.data,onChange:event=>handleFormChange('data',event.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"hora-entrevista\",children:\"Hora\"}),/*#__PURE__*/_jsx(\"input\",{id:\"hora-entrevista\",type:\"time\",value:formData.hora,onChange:event=>handleFormChange('hora',event.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"entrevistado\",children:\"Entrevistado\"}),/*#__PURE__*/_jsx(\"input\",{id:\"entrevistado\",type:\"text\",value:formData.entrevistado,onChange:event=>handleFormChange('entrevistado',event.target.value),placeholder:\"Nome de quem foi atendido\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"telefone\",children:\"Telefone para contato\"}),/*#__PURE__*/_jsx(\"input\",{id:\"telefone\",type:\"tel\",value:formData.telefone_contato,onChange:event=>handleFormChange('telefone_contato',event.target.value),placeholder:\"(00) 00000-0000\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"monitor\",children:\"Monitor respons\\xE1vel\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"monitor\",value:formData.monitor_id,onChange:event=>handleFormChange('monitor_id',event.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecione um monitor\"}),monitores.map(monitor=>/*#__PURE__*/_jsx(\"option\",{value:monitor.id,children:monitor.nome},monitor.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"proxima-visita\",children:\"Agendar pr\\xF3xima visita (opcional)\"}),/*#__PURE__*/_jsx(\"input\",{id:\"proxima-visita\",type:\"date\",value:formData.proxima_visita,onChange:event=>handleFormChange('proxima_visita',event.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"observacoes\",children:\"Observa\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"observacoes\",rows:\"4\",value:formData.observacoes,onChange:event=>handleFormChange('observacoes',event.target.value),placeholder:\"Resumo da visita, pontos de aten\\xE7\\xE3o, encaminhamentos...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:formLoading,children:formLoading?'Salvando...':'Registrar entrevista'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:fecharFormulario,children:\"Cancelar\"})]})]})]})})]});};export default Entrevistas;","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useState","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","formatarData","isoString","data","Date","Number","isNaN","getTime","toLocaleDateString","formatarRelativo","dias","undefined","concat","formatarProxima","atraso","Math","abs","numeroFormatado","valor","Intl","NumberFormat","format","ordenarResumo","lista","criterio","copia","sort","a","b","nome_familia","localeCompare","dataA","ultima_entrevista","dataB","_a$dias_ate_proxima","_b$dias_ate_proxima","diasA","dias_ate_proxima","MAX_SAFE_INTEGER","diasB","prioridade","critical","warning","pending","ok","_prioridade$a$status_","_prioridade$b$status_","_a$dias_desde_ultima","_b$dias_desde_ultima","priA","status_level","priB","dias_desde_ultima","prepararMonitor","monitor","_ref","_monitor$ID_MONITOR","_ref2","_monitor$NOME","_ref3","_monitor$TELEFONE","id","ID_MONITOR","id_monitor","nome","NOME","telefone","TELEFONE","Entrevistas","makeAuthenticatedRequest","hasPermission","navigate","resumo","setResumo","metrics","setMetrics","loading","setLoading","error","setError","pageWarnings","setPageWarnings","filtroStatus","setFiltroStatus","filtroBusca","setFiltroBusca","ordenacao","setOrdenacao","monitores","setMonitores","selectedFamily","setSelectedFamily","historico","setHistorico","historyLoading","setHistoryLoading","historyError","setHistoryError","mostrarHistorico","setMostrarHistorico","mostrarFormulario","setMostrarFormulario","formData","setFormData","hora","entrevistado","telefone_contato","monitor_id","observacoes","proxima_visita","formLoading","setFormLoading","formError","setFormError","formSuccess","setFormSuccess","formWarnings","setFormWarnings","podeRegistrar","carregarResumo","resposta","Array","isArray","err","console","message","carregarMonitores","map","filter","Boolean","monitorNormalizado","warn","carregarHistorico","familiaId","abrirHistorico","familia","id_familia","fecharHistorico","abrirFormulario","hojeIso","toISOString","split","ultima_entrevistado","responsavel","ultima_telefone","fecharFormulario","handleFormChange","campo","prev","_objectSpread","registrarEntrevista","event","preventDefault","dataIso","payload","data_entrevista","monitorId","method","headers","body","JSON","stringify","warnings","listaAtualizada","atualizada","find","item","resumoFiltrado","textoBusca","trim","toLowerCase","filtraStatus","status_prioridade","total_entrevistas","correspondeStatus","campos","ultima_monitor_nome","some","includes","className","children","onClick","disabled","totalFamilias","familiasSemEntrevista","entrevistasTotal","entrevistasUltimos30Dias","pendenciasCriticas","pendenciasAlerta","length","type","placeholder","value","onChange","target","index","status_label","role","_item$monitores","dias_desde","join","usuario_responsavel","id_entrevista","onSubmit","htmlFor","required","rows"],"sources":["/home/gustavodias/Downloads/CEPAS/src/pages/Entrevistas.js"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../hooks/useAuth';\nimport './Entrevistas.css';\n\nconst formatarData = (isoString) => {\n    if (!isoString) {\n        return 'N√£o registrada';\n    }\n    const data = new Date(isoString);\n    if (Number.isNaN(data.getTime())) {\n        return 'N√£o registrada';\n    }\n    return data.toLocaleDateString('pt-BR');\n};\n\nconst formatarRelativo = (dias) => {\n    if (dias === null || dias === undefined) {\n        return 'Nunca realizada';\n    }\n    if (dias <= 0) {\n        return 'Hoje';\n    }\n    if (dias === 1) {\n        return 'H√° 1 dia';\n    }\n    return `H√° ${dias} dias`;\n};\n\nconst formatarProxima = (dias) => {\n    if (dias === null || dias === undefined) {\n        return 'N√£o definido';\n    }\n    if (dias < 0) {\n        const atraso = Math.abs(dias);\n        if (atraso === 0) {\n            return 'Vence hoje';\n        }\n        if (atraso === 1) {\n            return 'Atrasado 1 dia';\n        }\n        return `Atrasado ${atraso} dias`;\n    }\n    if (dias === 0) {\n        return 'Para hoje';\n    }\n    if (dias === 1) {\n        return 'Em 1 dia';\n    }\n    return `Em ${dias} dias`;\n};\n\nconst numeroFormatado = (valor) => new Intl.NumberFormat('pt-BR').format(Number(valor || 0));\n\nconst ordenarResumo = (lista, criterio) => {\n    const copia = [...lista];\n    if (criterio === 'alfabetica') {\n        return copia.sort((a, b) => a.nome_familia.localeCompare(b.nome_familia, 'pt-BR'));\n    }\n    if (criterio === 'entrevista-recente') {\n        return copia.sort((a, b) => {\n            const dataA = a.ultima_entrevista ? new Date(a.ultima_entrevista).getTime() : 0;\n            const dataB = b.ultima_entrevista ? new Date(b.ultima_entrevista).getTime() : 0;\n            return dataB - dataA;\n        });\n    }\n    if (criterio === 'proxima-visita') {\n        return copia.sort((a, b) => {\n            const diasA = a.dias_ate_proxima ?? Number.MAX_SAFE_INTEGER;\n            const diasB = b.dias_ate_proxima ?? Number.MAX_SAFE_INTEGER;\n            return diasA - diasB;\n        });\n    }\n\n    const prioridade = {\n        critical: 1,\n        warning: 2,\n        pending: 3,\n        ok: 4\n    };\n\n    return copia.sort((a, b) => {\n        const priA = prioridade[a.status_level] ?? 5;\n        const priB = prioridade[b.status_level] ?? 5;\n        if (priA !== priB) {\n            return priA - priB;\n        }\n        const diasA = a.dias_desde_ultima ?? Number.MAX_SAFE_INTEGER;\n        const diasB = b.dias_desde_ultima ?? Number.MAX_SAFE_INTEGER;\n        return diasB - diasA;\n    });\n};\n\nconst prepararMonitor = (monitor) => {\n    if (!monitor) {\n        return null;\n    }\n    const id = monitor.ID_MONITOR ?? monitor.id_monitor ?? monitor.id;\n    const nome = monitor.NOME ?? monitor.nome ?? 'Sem nome';\n    const telefone = monitor.TELEFONE ?? monitor.telefone ?? null;\n    return { id, nome, telefone };\n};\n\nconst Entrevistas = () => {\n    const { makeAuthenticatedRequest, hasPermission } = useAuth();\n    const navigate = useNavigate();\n\n    const [resumo, setResumo] = useState([]);\n    const [metrics, setMetrics] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const [pageWarnings, setPageWarnings] = useState([]);\n\n    const [filtroStatus, setFiltroStatus] = useState('all');\n    const [filtroBusca, setFiltroBusca] = useState('');\n    const [ordenacao, setOrdenacao] = useState('prioridade');\n\n    const [monitores, setMonitores] = useState([]);\n\n    const [selectedFamily, setSelectedFamily] = useState(null);\n    const [historico, setHistorico] = useState([]);\n    const [historyLoading, setHistoryLoading] = useState(false);\n    const [historyError, setHistoryError] = useState('');\n    const [mostrarHistorico, setMostrarHistorico] = useState(false);\n\n    const [mostrarFormulario, setMostrarFormulario] = useState(false);\n    const [formData, setFormData] = useState({\n        data: '',\n        hora: '',\n        entrevistado: '',\n        telefone_contato: '',\n        monitor_id: '',\n        observacoes: '',\n        proxima_visita: ''\n    });\n    const [formLoading, setFormLoading] = useState(false);\n    const [formError, setFormError] = useState('');\n    const [formSuccess, setFormSuccess] = useState('');\n    const [formWarnings, setFormWarnings] = useState([]);\n\n    const podeRegistrar = hasPermission(['monitor', 'coordenador', 'admin']);\n\n    const carregarResumo = useCallback(async () => {\n        setLoading(true);\n        setError('');\n        setPageWarnings([]);\n        let lista = [];\n\n        try {\n            const resposta = await makeAuthenticatedRequest('/entrevistas/resumo');\n            lista = Array.isArray(resposta) ? resposta : resposta?.data || [];\n            setResumo(lista);\n            setMetrics(resposta?.metrics || null);\n        } catch (err) {\n            console.error('Erro ao carregar resumo de entrevistas:', err);\n            setError(err.message || 'Erro ao carregar resumo de entrevistas.');\n        } finally {\n            setLoading(false);\n        }\n\n        return lista;\n    }, [makeAuthenticatedRequest]);\n\n    const carregarMonitores = useCallback(async () => {\n        try {\n            const resposta = await makeAuthenticatedRequest('/dados/Monitor');\n            let lista = [];\n            if (Array.isArray(resposta)) {\n                lista = resposta.map(prepararMonitor).filter(Boolean);\n            } else if (Array.isArray(resposta?.data)) {\n                lista = resposta.data.map(prepararMonitor).filter(Boolean);\n            } else if (resposta) {\n                const monitorNormalizado = prepararMonitor(resposta);\n                if (monitorNormalizado) {\n                    lista = [monitorNormalizado];\n                }\n            }\n            setMonitores(lista);\n        } catch (err) {\n            console.warn('N√£o foi poss√≠vel carregar a lista de monitores:', err);\n        }\n    }, [makeAuthenticatedRequest]);\n\n    const carregarHistorico = useCallback(async (familiaId) => {\n        setHistoryLoading(true);\n        setHistoryError('');\n        try {\n            const resposta = await makeAuthenticatedRequest(`/familias/${familiaId}/entrevistas`);\n            const lista = Array.isArray(resposta) ? resposta : resposta?.data || [];\n            setHistorico(lista);\n        } catch (err) {\n            console.error('Erro ao carregar hist√≥rico de entrevistas:', err);\n            setHistorico([]);\n            setHistoryError(err.message || 'Erro ao carregar hist√≥rico de entrevistas.');\n        } finally {\n            setHistoryLoading(false);\n        }\n    }, [makeAuthenticatedRequest]);\n\n    useEffect(() => {\n        carregarResumo();\n        carregarMonitores();\n    }, [carregarResumo, carregarMonitores]);\n\n    const abrirHistorico = (familia) => {\n        setSelectedFamily(familia);\n        setMostrarHistorico(true);\n        carregarHistorico(familia.id_familia);\n    };\n\n    const fecharHistorico = () => {\n        setMostrarHistorico(false);\n        setHistorico([]);\n        setHistoryError('');\n    };\n\n    const abrirFormulario = (familia) => {\n        const hojeIso = new Date().toISOString().split('T')[0];\n        setSelectedFamily(familia);\n        setMostrarFormulario(true);\n        setFormError('');\n        setFormSuccess('');\n        setFormWarnings([]);\n        setFormData({\n            data: hojeIso,\n            hora: '',\n            entrevistado: familia.ultima_entrevistado || familia.responsavel || '',\n            telefone_contato: familia.ultima_telefone || '',\n            monitor_id: '',\n            observacoes: '',\n            proxima_visita: familia.proxima_visita ? familia.proxima_visita.split('T')[0] : ''\n        });\n    };\n\n    const fecharFormulario = () => {\n        setMostrarFormulario(false);\n        setFormLoading(false);\n        setFormError('');\n        setFormSuccess('');\n        setFormWarnings([]);\n    };\n\n    const handleFormChange = (campo, valor) => {\n        setFormData((prev) => ({ ...prev, [campo]: valor }));\n    };\n\n    const registrarEntrevista = async (event) => {\n        event.preventDefault();\n        if (!selectedFamily) {\n            setFormError('Selecione uma fam√≠lia para registrar a entrevista.');\n            return;\n        }\n\n        if (!formData.data) {\n            setFormError('Informe a data da entrevista.');\n            return;\n        }\n\n        const dataIso = formData.hora ? `${formData.data}T${formData.hora}` : formData.data;\n        const payload = {\n            data_entrevista: dataIso,\n            entrevistado: formData.entrevistado || null,\n            telefone_contato: formData.telefone_contato || null,\n            observacoes: formData.observacoes || null\n        };\n\n        if (formData.proxima_visita) {\n            payload.proxima_visita = formData.proxima_visita;\n        }\n\n        if (formData.monitor_id) {\n            const monitorId = Number(formData.monitor_id);\n            if (!Number.isNaN(monitorId)) {\n                payload.monitor_id = monitorId;\n            }\n        }\n\n        setFormLoading(true);\n        setFormError('');\n        setFormSuccess('');\n        setFormWarnings([]);\n        setPageWarnings([]);\n\n        try {\n            const resposta = await makeAuthenticatedRequest(`/familias/${selectedFamily.id_familia}/entrevistas`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(payload)\n            });\n\n            setFormSuccess(resposta?.message || 'Entrevista registrada com sucesso.');\n            if (Array.isArray(resposta?.warnings)) {\n                setFormWarnings(resposta.warnings);\n                setPageWarnings(resposta.warnings);\n            }\n\n            const listaAtualizada = await carregarResumo();\n            if (selectedFamily) {\n                const atualizada = listaAtualizada.find((item) => item.id_familia === selectedFamily.id_familia);\n                if (atualizada) {\n                    setSelectedFamily(atualizada);\n                }\n            }\n            if (mostrarHistorico && selectedFamily) {\n                await carregarHistorico(selectedFamily.id_familia);\n            }\n        } catch (err) {\n            console.error('Erro ao registrar entrevista:', err);\n            setFormError(err.message || 'Erro ao registrar a entrevista.');\n        } finally {\n            setFormLoading(false);\n        }\n    };\n\n    const resumoFiltrado = useMemo(() => {\n        const textoBusca = filtroBusca.trim().toLowerCase();\n        const filtraStatus = (item) => {\n            if (filtroStatus === 'all') {\n                return true;\n            }\n            if (filtroStatus === 'pendente') {\n                return item.status_prioridade === 'PENDENTE';\n            }\n            if (filtroStatus === 'critica') {\n                return item.status_prioridade === 'CRITICA';\n            }\n            if (filtroStatus === 'alerta') {\n                return item.status_prioridade === 'ALERTA' || item.status_prioridade === 'ATENCAO';\n            }\n            if (filtroStatus === 'emdia') {\n                return item.status_prioridade === 'EM_DIA';\n            }\n            if (filtroStatus === 'prox30') {\n                return item.dias_ate_proxima !== null && item.dias_ate_proxima >= 0 && item.dias_ate_proxima <= 30;\n            }\n            if (filtroStatus === 'semHistorico') {\n                return (item.total_entrevistas || 0) === 0;\n            }\n            return true;\n        };\n\n        return ordenarResumo(\n            resumo.filter((item) => {\n                const correspondeStatus = filtraStatus(item);\n                if (!correspondeStatus) {\n                    return false;\n                }\n                if (!textoBusca) {\n                    return true;\n                }\n                const campos = [\n                    item.nome_familia,\n                    item.responsavel,\n                    item.ultima_entrevistado,\n                    item.ultima_monitor_nome\n                ]\n                    .filter(Boolean)\n                    .map((valor) => valor.toLowerCase());\n                return campos.some((valor) => valor.includes(textoBusca));\n            }),\n            ordenacao\n        );\n    }, [filtroBusca, filtroStatus, ordenacao, resumo]);\n\n    return (\n        <div className=\"entrevistas-container\">\n            <div className=\"entrevistas-header\">\n                <div>\n                    <h1>üìë Painel de Entrevistas</h1>\n                    <p>Acompanhe o hist√≥rico, identifique pend√™ncias e registre novas entrevistas das fam√≠lias.</p>\n                </div>\n                <div className=\"header-actions\">\n                    <button className=\"btn-outline\" onClick={carregarResumo} disabled={loading}>\n                        {loading ? 'Atualizando...' : 'üîÑ Atualizar'}\n                    </button>\n                </div>\n            </div>\n\n            {metrics && (\n                <div className=\"metricas-grid\">\n                    <div className=\"metrica-card\">\n                        <span className=\"metrica-label\">Fam√≠lias acompanhadas</span>\n                        <strong className=\"metrica-valor\">{numeroFormatado(metrics.totalFamilias)}</strong>\n                        <span className=\"metrica-detalhe\">{numeroFormatado(metrics.familiasSemEntrevista)} sem entrevista</span>\n                    </div>\n                    <div className=\"metrica-card\">\n                        <span className=\"metrica-label\">Entrevistas registradas</span>\n                        <strong className=\"metrica-valor\">{numeroFormatado(metrics.entrevistasTotal)}</strong>\n                        <span className=\"metrica-detalhe\">{numeroFormatado(metrics.entrevistasUltimos30Dias)} nos √∫ltimos 30 dias</span>\n                    </div>\n                    <div className=\"metrica-card alerta\">\n                        <span className=\"metrica-label\">Pend√™ncias cr√≠ticas</span>\n                        <strong className=\"metrica-valor\">{numeroFormatado(metrics.pendenciasCriticas)}</strong>\n                        <span className=\"metrica-detalhe\">{numeroFormatado(metrics.pendenciasAlerta)} em alerta</span>\n                    </div>\n                    <div className=\"metrica-card\">\n                        <span className=\"metrica-label\">Pr√≥ximas visitas agendadas</span>\n                        <strong className=\"metrica-valor\">{numeroFormatado(\n                            resumoFiltrado.filter((item) => item.dias_ate_proxima !== null && item.dias_ate_proxima >= 0 && item.dias_ate_proxima <= 30).length\n                        )}</strong>\n                        <span className=\"metrica-detalhe\">Agendadas para at√© 30 dias</span>\n                    </div>\n                </div>\n            )}\n\n            <div className=\"entrevistas-filtros\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Pesquisar por fam√≠lia, respons√°vel ou entrevistador...\"\n                    value={filtroBusca}\n                    onChange={(event) => setFiltroBusca(event.target.value)}\n                />\n                <select value={filtroStatus} onChange={(event) => setFiltroStatus(event.target.value)}>\n                    <option value=\"all\">Todos os status</option>\n                    <option value=\"pendente\">Sem entrevista</option>\n                    <option value=\"critica\">Cr√≠tica (&gt;= 12 meses)</option>\n                    <option value=\"alerta\">Alerta / Aten√ß√£o</option>\n                    <option value=\"emdia\">Em dia</option>\n                    <option value=\"prox30\">Pr√≥ximas 4 semanas</option>\n                    <option value=\"semHistorico\">Nunca entrevistadas</option>\n                </select>\n                <select value={ordenacao} onChange={(event) => setOrdenacao(event.target.value)}>\n                    <option value=\"prioridade\">Ordenar por prioridade</option>\n                    <option value=\"alfabetica\">Ordem alfab√©tica</option>\n                    <option value=\"entrevista-recente\">√öltimas entrevistas</option>\n                    <option value=\"proxima-visita\">Pr√≥ximas visitas</option>\n                </select>\n            </div>\n\n            {error && <div className=\"alerta alerta-erro\">{error}</div>}\n            {pageWarnings.length > 0 && (\n                <div className=\"alerta alerta-aviso\">\n                    <strong>Aten√ß√£o:</strong>\n                    <ul>\n                        {pageWarnings.map((warn, index) => (\n                            <li key={`${warn.type}-${index}`}>{warn.message}</li>\n                        ))}\n                    </ul>\n                </div>\n            )}\n\n            {loading && <div className=\"lista-vazia\">Carregando entrevistas...</div>}\n\n            {!loading && resumoFiltrado.length === 0 && (\n                <div className=\"lista-vazia\">\n                    <h3>N√£o encontramos entrevistas para os filtros selecionados.</h3>\n                    <p>Ajuste a busca ou altere o status para visualizar os registros.</p>\n                </div>\n            )}\n\n            <div className=\"entrevistas-grid\">\n                {resumoFiltrado.map((familia) => (\n                    <div key={familia.id_familia} className={`entrevista-card status-${familia.status_level}`}>\n                        <div className=\"card-header\">\n                            <div>\n                                <h2>{familia.nome_familia}</h2>\n                                <span className=\"responsavel\">Respons√°vel: {familia.responsavel || 'N√£o informado'}</span>\n                            </div>\n                            <span className={`status-tag status-${familia.status_level}`}>\n                                {familia.status_label}\n                            </span>\n                        </div>\n\n                        <div className=\"card-info\">\n                            <div>\n                                <span className=\"info-label\">√öltima entrevista</span>\n                                <strong>{formatarData(familia.ultima_entrevista)}</strong>\n                                <span className=\"info-sub\">{formatarRelativo(familia.dias_desde_ultima)}</span>\n                            </div>\n                            <div>\n                                <span className=\"info-label\">Pr√≥xima visita agendada</span>\n                                <strong>{familia.proxima_visita ? formatarData(familia.proxima_visita) : 'N√£o agendada'}</strong>\n                                {familia.proxima_visita && (\n                                    <span className=\"info-sub\">{formatarProxima(familia.dias_ate_proxima)}</span>\n                                )}\n                            </div>\n                            <div>\n                                <span className=\"info-label\">Entrevistador</span>\n                                <strong>{familia.ultima_monitor_nome || '‚Äî'}</strong>\n                                <span className=\"info-sub\">{familia.total_entrevistas || 0} entrevista(s)</span>\n                            </div>\n                        </div>\n\n                        <div className=\"card-actions\">\n                            <button className=\"btn-secondary\" onClick={() => abrirHistorico(familia)}>\n                                üìú Hist√≥rico\n                            </button>\n                            {podeRegistrar && (\n                                <button className=\"btn-primary\" onClick={() => abrirFormulario(familia)}>\n                                    ‚ûï Registrar entrevista\n                                </button>\n                            )}\n                            <button className=\"btn-link\" onClick={() => navigate(`/editar-familia/${familia.id_familia}`)}>\n                                ‚úèÔ∏è Ver cadastro completo\n                            </button>\n                        </div>\n                    </div>\n                ))}\n            </div>\n\n            {mostrarHistorico && (\n                <div className=\"modal-overlay\" role=\"dialog\" aria-modal=\"true\">\n                    <div className=\"modal modal-large\">\n                        <div className=\"modal-header\">\n                            <div>\n                                <h2>Hist√≥rico de Entrevistas</h2>\n                                <p>{selectedFamily?.nome_familia}</p>\n                            </div>\n                            <button className=\"btn-close\" onClick={fecharHistorico}>‚úñ</button>\n                        </div>\n\n                        {historyLoading && <div className=\"loading\">Carregando hist√≥rico...</div>}\n                        {historyError && <div className=\"alerta alerta-erro\">{historyError}</div>}\n\n                        {!historyLoading && historico.length === 0 && (\n                            <div className=\"lista-vazia\">\n                                <h3>Nenhuma entrevista registrada.</h3>\n                                <p>Voc√™ pode registrar uma nova entrevista pelo bot√£o abaixo.</p>\n                            </div>\n                        )}\n\n                        {!historyLoading && historico.length > 0 && (\n                            <ul className=\"historico-lista\">\n                                {historico.map((item) => (\n                                    <li key={item.id_entrevista}>\n                                        <div className=\"historico-header\">\n                                            <div>\n                                                <strong>{formatarData(item.data_entrevista)}</strong>\n                                                <span>{formatarRelativo(item.dias_desde)}</span>\n                                            </div>\n                                            <span className=\"historico-entrevistador\">\n                                                {item.monitores?.length\n                                                    ? item.monitores.map((monitor) => monitor.nome).join(', ')\n                                                    : 'Monitor n√£o informado'}\n                                            </span>\n                                        </div>\n                                        <div className=\"historico-body\">\n                                            <p><strong>Entrevistado:</strong> {item.entrevistado || 'N√£o informado'}</p>\n                                            <p><strong>Contato:</strong> {item.telefone_contato || 'N√£o informado'}</p>\n                                            {item.proxima_visita && (\n                                                <p>\n                                                    <strong>Pr√≥xima visita agendada:</strong> {formatarData(item.proxima_visita)}\n                                                    {item.dias_ate_proxima !== null && item.dias_ate_proxima !== undefined && (\n                                                        <span className=\"historico-proxima\"> ({formatarProxima(item.dias_ate_proxima)})</span>\n                                                    )}\n                                                </p>\n                                            )}\n                                            {item.observacoes && (\n                                                <p className=\"historico-observacoes\"><strong>Observa√ß√µes:</strong> {item.observacoes}</p>\n                                            )}\n                                            {item.usuario_responsavel && (\n                                                <p className=\"historico-responsavel\">Registrado por {item.usuario_responsavel}</p>\n                                            )}\n                                        </div>\n                                    </li>\n                                ))}\n                            </ul>\n                        )}\n\n                        {podeRegistrar && (\n                            <div className=\"modal-footer\">\n                                <button className=\"btn-primary\" onClick={() => abrirFormulario(selectedFamily)}>\n                                    ‚ûï Registrar nova entrevista\n                                </button>\n                                <button className=\"btn-secondary\" onClick={fecharHistorico}>Fechar</button>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            )}\n\n            {mostrarFormulario && (\n                <div className=\"modal-overlay\" role=\"dialog\" aria-modal=\"true\">\n                    <div className=\"modal modal-form\">\n                        <div className=\"modal-header\">\n                            <div>\n                                <h2>Registrar entrevista</h2>\n                                <p>{selectedFamily?.nome_familia}</p>\n                            </div>\n                            <button className=\"btn-close\" onClick={fecharFormulario}>‚úñ</button>\n                        </div>\n\n                        {formError && <div className=\"alerta alerta-erro\">{formError}</div>}\n                        {formSuccess && <div className=\"alerta alerta-sucesso\">{formSuccess}</div>}\n                        {formWarnings.length > 0 && (\n                            <div className=\"alerta alerta-aviso\">\n                                <ul>\n                                    {formWarnings.map((warn, index) => (\n                                        <li key={`${warn.type}-${index}`}>{warn.message}</li>\n                                    ))}\n                                </ul>\n                            </div>\n                        )}\n\n                        <form className=\"entrevista-form\" onSubmit={registrarEntrevista}>\n                            <div className=\"form-row\">\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"data-entrevista\">Data</label>\n                                    <input\n                                        id=\"data-entrevista\"\n                                        type=\"date\"\n                                        value={formData.data}\n                                        onChange={(event) => handleFormChange('data', event.target.value)}\n                                        required\n                                    />\n                                </div>\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"hora-entrevista\">Hora</label>\n                                    <input\n                                        id=\"hora-entrevista\"\n                                        type=\"time\"\n                                        value={formData.hora}\n                                        onChange={(event) => handleFormChange('hora', event.target.value)}\n                                    />\n                                </div>\n                            </div>\n\n                            <div className=\"form-group\">\n                                <label htmlFor=\"entrevistado\">Entrevistado</label>\n                                <input\n                                    id=\"entrevistado\"\n                                    type=\"text\"\n                                    value={formData.entrevistado}\n                                    onChange={(event) => handleFormChange('entrevistado', event.target.value)}\n                                    placeholder=\"Nome de quem foi atendido\"\n                                />\n                            </div>\n\n                            <div className=\"form-group\">\n                                <label htmlFor=\"telefone\">Telefone para contato</label>\n                                <input\n                                    id=\"telefone\"\n                                    type=\"tel\"\n                                    value={formData.telefone_contato}\n                                    onChange={(event) => handleFormChange('telefone_contato', event.target.value)}\n                                    placeholder=\"(00) 00000-0000\"\n                                />\n                            </div>\n\n                            <div className=\"form-group\">\n                                <label htmlFor=\"monitor\">Monitor respons√°vel</label>\n                                <select\n                                    id=\"monitor\"\n                                    value={formData.monitor_id}\n                                    onChange={(event) => handleFormChange('monitor_id', event.target.value)}\n                                >\n                                    <option value=\"\">Selecione um monitor</option>\n                                    {monitores.map((monitor) => (\n                                        <option key={monitor.id} value={monitor.id}>\n                                            {monitor.nome}\n                                        </option>\n                                    ))}\n                                </select>\n                            </div>\n\n                            <div className=\"form-group\">\n                                <label htmlFor=\"proxima-visita\">Agendar pr√≥xima visita (opcional)</label>\n                                <input\n                                    id=\"proxima-visita\"\n                                    type=\"date\"\n                                    value={formData.proxima_visita}\n                                    onChange={(event) => handleFormChange('proxima_visita', event.target.value)}\n                                />\n                            </div>\n\n                            <div className=\"form-group\">\n                                <label htmlFor=\"observacoes\">Observa√ß√µes</label>\n                                <textarea\n                                    id=\"observacoes\"\n                                    rows=\"4\"\n                                    value={formData.observacoes}\n                                    onChange={(event) => handleFormChange('observacoes', event.target.value)}\n                                    placeholder=\"Resumo da visita, pontos de aten√ß√£o, encaminhamentos...\"\n                                />\n                            </div>\n\n                            <div className=\"modal-footer\">\n                                <button type=\"submit\" className=\"btn-primary\" disabled={formLoading}>\n                                    {formLoading ? 'Salvando...' : 'Registrar entrevista'}\n                                </button>\n                                <button type=\"button\" className=\"btn-secondary\" onClick={fecharFormulario}>\n                                    Cancelar\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default Entrevistas;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}